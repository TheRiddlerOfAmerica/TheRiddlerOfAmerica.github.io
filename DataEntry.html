<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Data Entry Ooga Chaka</title>
    <style>

    </style>
</head>
<body>
    <script>

        class shelfItem {
            constructor(desc, number, notes, posX, posY) {
                this.desc = desc;
                this.number = number;
                this.notes = notes;
                this.posX = posX;
                this.posY = posY;
            }
        }



        if (!("BarcodeDetector" in globalThis)) {
            console.log("Barcode Detector is not supported by this browser.");
            document.body.style.background = "red";
        } else {
            console.log("Barcode Detector supported!");
            document.body.style.background = "green";
            // create new detector
            const barcodeDetector = new BarcodeDetector({
                formats: ["code_39", "codabar", "ean_13"],
            });
        }
    </script>
    <input type="file" name="image" accept="image/*" capture="environment">

    <div class="input-group">
        <input type="text" name="kode_barang" id="kode_barang" class="form-control" placeholder="Cari Kode Barang/ Barcode">
        <div class="input-group-append">
            <button class="btn btn-primary" id="btnsearch" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                     width="20" height="20"
                     viewBox="0 0 50 50"
                     style=" fill:#000000;">
                    <path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"></path>
                </svg>
            </button>
        </div>
    </div>
    <script>
        const html5QrCode = new Html5Qrcode("qr-reader");
        const qrCodeSuccessCallback = (decodedText, decodedResult) => {
            /* handle success */
            console.log(`Scan result: ${decodedText}`, decodedResult);
            document.getElementById('kode').value = decodedText;
            // ...
            html5QrcodeScanner.clear();
        };
        const config = { fps: 10, qrbox: 250 };
        // Select front camera or fail with `OverconstrainedError`.
        // html5QrCode.start({ facingMode: { exact: "environment"} }, config, qrCodeSuccessCallback);
        html5QrCode.start({ facingMode: { exact: "user" } }, config, qrCodeSuccessCallback);
}
    </script>
    html5QrCode.start({ facingMode: { exact: "environment"} }, config, qrCodeSuccessCallback);
</body>
</html>